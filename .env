# ============================================================================
# DOMAIN & IDENTITY
# ============================================================================
DOMAIN_NAME=example.com
GITLAB_SUBDOMAIN=gitlab
REGISTRY_SUBDOMAIN=registry


# ============================================================================
# GITLAB ACCESS
# ============================================================================
# Hostname for GitLab - use your server IP
GITLAB_HOST_IP=192.168.1.55

# Port to access GitLab web interface on your host machine
GITLAB_PORT=443

# SSH port for Git operations (git clone, push, pull via SSH)
GITLAB_SSH_PORT=2222


# ============================================================================
# SECURITY & AUTHENTICATION
# ============================================================================
# I guess we dont use this anymore: https://letsencrypt.org/docs/expiration-emails/
ACME_EMAIL=acmemail4reminders@gmail.com


# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
# Path on host machine where GitLab backups will be stored
BACKUP_PATH=/mnt/backups/borg/gitlab


# ============================================================================
# NETWORK TOPOLOGY
# ============================================================================
DOCKER_NETWORK_NAME=gitlab_internal
INTERNAL_SUBNET=172.20.0.0/16


# ============================================================================
# NETWORK CONFIGURATION
# ============================================================================
# Monitoring whitelist - IPs allowed to access /health and /-/readiness
# Format: Comma-separated CIDR ranges
MONITORING_WHITELIST=127.0.0.0/8,::1/128

# Allowed hosts - prevents Host header attacks
# Format: Comma-separated hostnames/IPs
ALLOWED_HOSTS=0.0.0.0,localhost,127.0.0.1

# Trusted proxies - IPs of reverse proxies that can set X-Forwarded-For
# Format: Comma-separated CIDR ranges or hostnames
TRUSTED_PROXIES=172.16.0.0/12,192.168.0.0/16,10.0.0.0/8


# ============================================================================
# PERFORMANCE TUNING (Homelab Optimized)
# ============================================================================
# Puma web server settings
PUMA_WORKER_PROCESSES=1    # Number of worker processes (1 = low resource)
PUMA_WORKER_TIMEOUT=120    # Seconds before killing slow workers
PUMA_WORKER_MAXMEM=512     # Max memory per worker (MB)

# PostgreSQL memory allocation
POSTGRESQL_SHARED_BUFFERS=256MB

# Sidekiq background job processing
SIDEKIQ_MAX_CONCURRENCY=4  # Max concurrent jobs across all queues
SIDEKIQ_CONCURRENCY=1      # Jobs per worker


# ============================================================================
# GITLAB WORKHORSE
# ============================================================================
# Internal proxy listen address (handles Git HTTP, file uploads, etc.)
WORKHORSE_LISTEN_ADDR=0.0.0.0:8181


# ============================================================================
# FEATURE TOGGLES
# ============================================================================
# Disabling Prometheus metrics collection saves ram
PROMETHEUS_ENABLED=false
GITLAB_PAGES_ENABLED=false
LETSENCRYPT_ENABLED=false


# ============================================================================
# UI PREFERENCES
# ============================================================================
# Default theme: 1=Indigo, 2=Dark, 3=Light, 4=Blue, 5=Green, 6=Red
GITLAB_DEFAULT_THEME=1

# Default color mode: 'auto', 'light', or 'dark'
GITLAB_DEFAULT_COLOR_MODE=auto


# ============================================================================
# TELEMETRY
# ============================================================================
# Disable usage statistics sent to GitLab (true = disabled)
DISABLE_USAGE_DATA=true
